{"version":3,"sources":["../src/index.js"],"names":["cors","require","app","use","bodyParser","json","port","express","urlencoded","extended","post","sendmailController","req","res","httpRequest","then","headers","statusCode","data","set","status","send","catch","e","end","get","cronjobController","all","adminController","subscribersController","dealController","clientController","bankController","transactionController","accountController","delete","balanceController","listen","console","log","process","env","PORT"],"mappings":"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","sourcesContent":["import express from 'express'\nimport bodyParser from 'body-parser'\nimport handleDealRequest from './deal'\nimport handleClientRequest from './client'\nimport handleAdminRequest from './admin'\n\nimport handleTransactionRequest from './transaction'\nimport handleAccountRequest from './account'\nimport handleBalanceRequest from './balance'\nimport handleSubscribersRequest from './subscribers'\nimport handleBankRequest from './bank'\n\nimport handleSendmailRequest from './mailer'\nimport handleCronjobRequest from './cronjob'\n\n\nimport adaptRequest from './helpers/adapt-request'\n\nvar cors = require('cors')\nconst app = express();\napp.use(bodyParser.json());\n\nconst port = 9090;\n\n//Middleware\napp.use(express.urlencoded({ extended: true}));\napp.use(express.json());\n\napp.use(cors());\n\napp.post('/sendmail', sendmailController);\n\nfunction sendmailController (req, res) {\n  const httpRequest = adaptRequest(req)\n  handleSendmailRequest(httpRequest)\n      .then(({ headers, statusCode, data }) =>\n      res\n          .set(headers)\n          .status(statusCode) \n          .send(data)\n      )\n      .catch(e => res.status(500).end())\n}\n\napp.get('/cronjob/:id', cronjobController);\napp.get('/cronjob/find/?start=:now', cronjobController);\napp.get('/cronjob/find/?end=:now', cronjobController);\n\nfunction cronjobController (req, res) {\n    const httpRequest = adaptRequest(req)\n    handleCronjobRequest(httpRequest)\n        .then(({ headers, statusCode, data }) =>\n        res\n            .set(headers)\n            .status(statusCode) \n            .send(data)\n        )\n        .catch(e => res.status(500).end())\n}\n\n\napp.all('/admin', adminController);\napp.post('/admin/add', adminController);\napp.post('/admin/auth', adminController);\napp.post('/admin/reset', adminController);\napp.get('/admin/:id', adminController);\napp.get('/admin/find/?email=:email', adminController);\n\nfunction adminController (req, res) {\n    const httpRequest = adaptRequest(req)\n    handleAdminRequest(httpRequest)\n        .then(({ headers, statusCode, data }) =>\n        res\n            .set(headers)\n            .status(statusCode) \n            .send(data)\n        )\n        .catch(e => res.status(500).end())\n}\n\n\napp.all('/subscriber', subscribersController);\napp.post('/subscriber/add', subscribersController);\napp.post('/subscriber/verify', subscribersController);\napp.get('/subscriber/:id', subscribersController);\napp.get('/subscriber/find/?id=:id', subscribersController);\napp.get('/subscriber/find/?phone=:phone', subscribersController);\napp.get('/subscriber/find/?customer_id=:id', subscribersController);\n\n\nfunction subscribersController (req, res) {\n  \n  const httpRequest = adaptRequest(req)\n  handleSubscribersRequest(httpRequest)\n    .then(({ headers, statusCode, data }) =>\n      res\n        .set(headers)\n        .status(statusCode) \n        .send(data)\n    )\n    .catch(e => res.status(500).end())\n}\n\n\napp.all('/deal', dealController);\napp.post('/deal/add', dealController);\napp.get('/deal/:id', dealController);\napp.get('/deal/find/?id=:id', dealController);\napp.get('/deal/find/?phone=:phone', dealController);\napp.get('/deal/find/?customer_id=:id', dealController);\n\nfunction dealController (req, res) {\n    const httpRequest = adaptRequest(req)\n    handleDealRequest(httpRequest)\n        .then(({ headers, statusCode, data }) =>\n        res\n            .set(headers)\n            .status(statusCode) \n            .send(data)\n        )\n        .catch(e => res.status(500).end())\n}\n\n\napp.all('/client', clientController);\napp.post('/client/add', clientController);\napp.get('/client/:id', clientController);\napp.get('/client/find/?id=:id', clientController);\napp.get('/client/find/?customer_id=:id', clientController);\n\nfunction clientController (req, res) {\n  \n  const httpRequest = adaptRequest(req)\n  handleClientRequest(httpRequest)\n    .then(({ headers, statusCode, data }) =>\n      res\n        .set(headers)\n        .status(statusCode) \n        .send(data)\n    )\n    .catch(e => res.status(500).end())\n}\n\napp.all('/bank', bankController);\napp.post('/bank/add', bankController);\napp.get('/bank/:id', bankController);\napp.get('/bank/find/?id=:id', bankController);\napp.get('/bank/find/?customer_id=:id', bankController);\n\nfunction bankController (req, res) {\n  \n  const httpRequest = adaptRequest(req)\n  handleBankRequest(httpRequest)\n    .then(({ headers, statusCode, data }) =>\n      res\n        .set(headers)\n        .status(statusCode) \n        .send(data)\n    )\n    .catch(e => res.status(500).end())\n}\n\napp.all('/transaction', transactionController);\napp.post('/transaction/add', transactionController);\napp.get('/transaction/:id', transactionController);\napp.get('/transaction/find/?id=:id', transactionController);\napp.get('/transaction/find/?customer_id=:id', transactionController);\n\nfunction transactionController (req, res) {\n  \n  const httpRequest = adaptRequest(req)\n  handleTransactionRequest(httpRequest)\n    .then(({ headers, statusCode, data }) =>\n      res\n        .set(headers)\n        .status(statusCode) \n        .send(data)\n    )\n    .catch(e => res.status(500).end())\n}\n\n\n\napp.all('/account', accountController);\napp.post('/account/add', accountController);\napp.delete('/account/:id', accountController);\napp.get('/account/:id', accountController);\napp.get('/account/find/?id=:id', accountController);\napp.get('/account/find/?customer_id=:id', accountController);\n\nfunction accountController (req, res) {\n  \n  const httpRequest = adaptRequest(req)\n  handleAccountRequest(httpRequest)\n    .then(({ headers, statusCode, data }) =>\n      res\n        .set(headers)\n        .status(statusCode) \n        .send(data)\n    )\n    .catch(e => res.status(500).end())\n}\n\n\napp.all('/balance', balanceController);\napp.post('/balance/add', balanceController);\napp.get('/balance/:id', balanceController);\napp.delete('/balance/:id', balanceController);\napp.get('/balance/find/?id=:id', balanceController);\napp.get('/balance/find/?customer_id=:id', balanceController);\n\nfunction balanceController (req, res) {\n  \n  const httpRequest = adaptRequest(req)\n  handleBalanceRequest(httpRequest)\n    .then(({ headers, statusCode, data }) =>\n      res\n        .set(headers)\n        .status(statusCode) \n        .send(data)\n    )\n    .catch(e => res.status(500).end())\n}\n\n\n\napp.listen(9090, () => console.log(`Listening on port 9090`+process.env.PORT || 9090));"],"file":"index.js"}